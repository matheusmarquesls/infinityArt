<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinity Art - Dashboard</title>

    <link rel="shortcut icon" href="../src/img/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../src/css/styles - dashboard.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script>
    <script src="http://www.chartjs.org/samples/latest/utils.js"></script>
    <script src="https://kit.fontawesome.com/80ec270284.js" crossorigin="anonymous"></script>

</head>

<body>

                <section class="fundo">

                    <div class="dashboard">

                        <div class="dash">

                        <div class="ambiente-atual">

                            <div class="list-endereco">
                         
                                <div class="menu-endereco">
                                    <h1>Casa</h1>
                                    <div class="submenu-amb"><h2>Sala</h2></div>
                                </div>
                           
                                <div class="menu-endereco">
                                    <h1>Galeria</h1>
                                    <div class="submenu-amb"><h2>Exposição 1</h2></div>
                                </div>

                            </div>
                        
                        </div>

                        <div class="distribuicao-elementos">

                            <div class="info-kpi">

                                <div class="kpi">
                                    <h1> 100 </h1>
                                    <img src="../src/img/alertG.png">
                                </div>

                                <div class="kpi">
                                    <h1> 100 </h1>
                                    <img src="../src/img/alertY.png">
                                </div>

                                <div class="kpi">
                                    <h1> 100 </h1>
                                    <img src="../src/img/alertR.png">
                                </div>

                                <div class="local">
                                    <h1>Casa</h1>
                                    <hr>
                                    <h1>Sala</h1>
                                </div>

                            </div>

                            <div class="graficos-dash">

                                <div class="grafico g-sensor">
                                    <canvas id="dht11"></canvas>
                                </div>

                                <div class="grafico g-pizza">
                                    <canvas id="myChartPizza"></canvas>
                                </div>

                                <div class="grafico g-sensor">
                                    <canvas id="luminosidade"></canvas>
                                </div>

                                <div class="grafico g-barra">
                                    <canvas id="myChartBar"></canvas>
                                </div>

                            </div>

                        </div>

                    </div>

                    </div>

                </section>

                <script>

                    function toggleMenu() {
                        let subMenu = document.getElementById("sub-menu-wrap");
                        subMenu.classList.toggle("open-menu");
                    };

                   /* -- dht11Umidade -- */
                   var contextoDht11 = document.getElementById('dht11').getContext('2d');
                    
                    var dht11Umidade = new Chart(
                        contextoDht11,
                        {
                            type: 'line',
                            data: {
                                datasets: [{
                                    label: 'Umidade',
                                    data: [123, 123, 123],
                                    type: 'line',
                                    borderColor: ['#45b3e7'],
                                    backgroundColor: ['transparent'],
                                    borderWidth: 2

                                },
                                {
                                    label: 'Temperatura',
                                    data: [12, 20, 40],
                                    type: 'line',
                                    borderColor: ['#fa2e30'],
                                    backgroundColor: ['transparent'],
                                    borderWidth: 2

                                }]
                            },
                            options: {
                                responsive: true,
                                animation: {
                                    duration: 0
                                }
                            }
                        }
                    );
                    /* -- luminosidade -- */
                    var contextoLuminosidade = document.getElementById('luminosidade').getContext('2d');
        
                    var luminosidade = new Chart(
                        contextoLuminosidade,
                        {
                            type: 'line',
                            data: {
                                datasets: [{
                                    label: 'Luminosidade',
                                    data: [12, 20, 40],
                                    type: 'line',
                                    borderColor: ['#ffd902'],
                                    backgroundColor: ['transparent'],
                                    borderWidth: 2
                                }]
                            },
                            options: {
                                responsive: true,
                                animation: {
                                    duration: 0
                                }
                            }
                        }
                    );
                    // gráfico média 
                    var contextoMedia = document.getElementById('myChartBar').getContext('2d');
                    var media = new Chart(
                        contextoMedia,
                        {
                            type: 'bar',
                            data: {
                                datasets: [{
                                    label: 'Media Umi',
                                    data: [78],
                                    type: 'bar',
                                    borderColor: ['#45b3e7'],
                                    backgroundColor: ['#45b3e7'],
                                }, {
                                    label: 'Media Temp',
                                    type: 'bar',
                                    data: [24],
                                    borderColor: ['#fa2e30'],
                                    backgroundColor: ['#fa2e30']
                                }, {
                                    label: 'Media Lux',
                                    data: [123],
                                    type: 'bar',
                                    borderColor: ['#ffd902'],
                                    backgroundColor: ['#ffd902']
                                }
                            ]},
                            options: {
                                responsive: true,
                                animation: {
                                    duration: 0
                                }
                            }
                        }
                    );
                    // gráfico pizza 
                    /* -- luminosidade -- */
                    var contextoPizza = document.getElementById('myChartPizza').getContext('2d');
                    var media = new Chart(
                        contextoPizza,
                        {
                            type: 'pie',
                            data: {
                                labels: [
                                'Bom', 'Ruim', 'Razoável',
                                ],
                                datasets: [{
                                    data: [20, 21, 59],
                                    type: 'doughnut',
                                    backgroundColor: ['#38ce67', '#bc3d3d', '#ffd902'],
                                }
                            ]},
                            hoverOffset: 4,
                            options: {
                                responsive: true,
                                animation: {
                                    duration: 0
                                }
                            }
                        }
                    );
                    
                    

                    // var paginacao = {};
                    // var tempo = {};
                    // function obterDados(grafico, endpoint) {
                    //     var http = new XMLHttpRequest();
                    //     http.open('GET', 'http://localhost:3300/sensores/' + endpoint, false);
                    //     http.send(null);
                    //     var valores = JSON.parse(http.responseText);
                    //     if (paginacao[endpoint] == null) {
                    //         paginacao[endpoint] = 0;
                    //     }
                    //     if (tempo[endpoint] == null) {
                    //         tempo[endpoint] = 0;
                    //     }
                    //     // Exibir à partir do último elemento exibido anteriormente
                    //     var ultimaPaginacao = paginacao[endpoint];
                    //     paginacao[endpoint] = valores.length;
                    //     var valores = valores.slice(ultimaPaginacao);
                    //     valores.forEach((valor) => {
                    //         //Máximo de 60 itens exibidos no gráfico
                    //         if (grafico.data.labels.length == 10 && grafico.data.datasets[0].data.length == 10) {
                    //             grafico.data.labels.shift();
                    //             grafico.data.datasets[0].data.shift();
                    //         }

                    //         grafico.data.labels.push(tempo[endpoint]++);
                    //         grafico.data.datasets[0].data.push(parseFloat(valor));
                    //         grafico.update();
                    //     })
                    // }

                    // setInterval(() => {
                    //     obterDados(Umidade, 'dht11/umidade');
                    //     obterDados(Temperatura, 'dht11/temperatura');
                    //     obterDados(luminosidade, 'luminosidade');
                    // }, 1000);

                </script>